# examples/contracts/user_event.yml
# This is an example YAML file defining a user event contract.
# description: user behavioral events from web and mobiles applications
# TODO: add owner, tags, and other metadata as needed

contract:
  owner: "data-team"
  version: "1.0.0"
  tags:
    - "user"
    - "event"
    - "behavioral"
  format: "iceberg"
  description: "User event data capturing behavioral interactions from web and mobile applications."


schema:
  fields:
    - name: "user_id"
      type: "long"
      nullable: false
      description: "Unique identifier for the user"
      tags:
        - "PII"
        - "identifier"

    - name: "event_type"
      type: "string"
      nullable: false
      constraints:
        - type: "allowed_values"
          values: ["click", "view", "purchase", "signup"]

    - name: "event_timestamp"
      type: "timestamp"
      nullable: false
      description: "Timestamp when the event occurred"

    - name: "event_properties"
      type: "map<string, string>"
      nullable: true
      description: "Additional properties associated with the event"
  
  quality_checks:
    freshness:
      max_age: "1h"
      timestamp_field: "event_timestamp"

    completeness:
      fields:
        - "user_id"
        - "event_type"
        - "event_timestamp"
    
    uniqueness:
      fields:
        - "user_id"
        - "event_timestamp"
    
    partitioning:
      - type: "daily"
        field: "event_timestamp"
    
    sla:
      availability: "99.9%"
      latency: "15m"

 